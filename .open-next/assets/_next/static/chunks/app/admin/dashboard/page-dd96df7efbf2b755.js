(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{38838:(e,s,a)=>{Promise.resolve().then(a.bind(a,5895))},5895:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var t=a(95155),l=a(49048),r=a(21567),i=a(73312),n=a(12115),d=a(21868);let c=n.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(d.bL,{ref:s,className:(0,r.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(d.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(o,{}),(0,t.jsx)(d.OK,{})]})});c.displayName=d.bL.displayName;let o=n.forwardRef((e,s)=>{let{className:a,orientation:l="vertical",...i}=e;return(0,t.jsx)(d.VM,{ref:s,orientation:l,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=d.VM.displayName;var m=a(63409),x=a(32645),h=a(52488),u=a(27193);let p=m.bL;m.YJ;let g=m.WT,f=n.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(m.l9,{ref:s,className:(0,r.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,t.jsx)(m.In,{asChild:!0,children:(0,t.jsx)(x.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=m.l9.displayName;let j=n.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(m.PP,{ref:s,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})});j.displayName=m.PP.displayName;let N=n.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(m.wn,{ref:s,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(x.A,{className:"h-4 w-4"})})});N.displayName=m.wn.displayName;let v=n.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...n}=e;return(0,t.jsx)(m.ZL,{children:(0,t.jsxs)(m.UC,{ref:s,className:(0,r.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(j,{}),(0,t.jsx)(m.LM,{className:(0,r.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(N,{})]})})});v.displayName=m.UC.displayName,n.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(m.JU,{ref:s,className:(0,r.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=m.JU.displayName;let b=n.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(m.q7,{ref:s,className:(0,r.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(m.VF,{children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})}),(0,t.jsx)(m.p4,{children:l})]})});b.displayName=m.q7.displayName,n.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(m.wv,{ref:s,className:(0,r.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=m.wv.displayName;var w=a(72508),y=a(98675),S=a(17884),z=a(89789),P=a(19083),C=a(25012),A=a(15325),R=a(76046);function k(e){var s,a,l;let{columns:d,data:m,pageCount:x,pageSizeOptions:h=[1,10,20,30,40,50],className:u}=e,j=(0,R.useSearchParams)(),N=(0,R.useRouter)(),k=Number(null!==(a=null==j?void 0:j.get("page"))&&void 0!==a?a:"1"),M=isNaN(k)||k<1?1:k,O=Number(null!==(l=null==j?void 0:j.get("limit"))&&void 0!==l?l:"10"),T=isNaN(O)?10:O,[{pageIndex:D,pageSize:W},E]=n.useState({pageIndex:M-1,pageSize:T});n.useEffect(()=>{let e=new URLSearchParams(j.toString());e.set("page",(D+1).toString()),e.set("limit",W.toString()),N.push("?".concat(e.toString()))},[D,W,j,N]);let K=(0,z.N4)({data:m,columns:d,pageCount:null!=x?x:-1,getCoreRowModel:(0,P.HT)(),getFilteredRowModel:(0,P.hM)(),state:{pagination:{pageIndex:D,pageSize:W}},onPaginationChange:E,getPaginationRowModel:(0,P.kW)(),manualPagination:!0,manualFiltering:!0,enableColumnResizing:!0,columnResizeMode:"onChange"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c,{className:(0,r.cn)("h-[calc(80vh-220px)] w-full overflow-auto rounded-md border md:h-[calc(80dvh-80px)]",u),children:[(0,t.jsxs)(w.XI,{className:"relative min-w-[800px] table-fixed",children:[(0,t.jsx)(w.A0,{children:K.getHeaderGroups().map(e=>(0,t.jsx)(w.Hj,{children:e.headers.map(e=>(0,t.jsx)(w.nd,{style:{width:e.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"whitespace-nowrap px-2 sm:px-4 py-3 text-left font-medium text-xs sm:text-sm",children:e.isPlaceholder?null:(0,z.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(w.BF,{children:(null===(s=K.getRowModel().rows)||void 0===s?void 0:s.length)?K.getRowModel().rows.map(e=>(0,t.jsx)(w.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(w.nA,{style:{width:e.column.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"px-2 sm:px-4 py-3 text-xs sm:text-sm",children:(0,z.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(w.Hj,{children:(0,t.jsx)(w.nA,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]}),(0,t.jsx)(o,{orientation:"horizontal"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2 space-x-2 py-4 sm:flex-row",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 text-xs sm:text-sm text-muted-foreground",children:[K.getFilteredSelectedRowModel().rows.length," of"," ",K.getFilteredRowModel().rows.length," row(s) selected."]}),(0,t.jsx)("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"whitespace-nowrap text-xs sm:text-sm font-medium",children:"Per page"}),(0,t.jsxs)(p,{value:"".concat(K.getState().pagination.pageSize),onValueChange:e=>{K.setPageSize(Number(e))},children:[(0,t.jsx)(f,{className:"h-8 w-[70px]",children:(0,t.jsx)(g,{placeholder:K.getState().pagination.pageSize})}),(0,t.jsx)(v,{side:"top",children:h.map(e=>(0,t.jsx)(b,{value:"".concat(e),children:e},e))})]})]})})]}),(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 sm:justify-end",children:[(0,t.jsxs)("div",{className:"flex w-[80px] sm:w-[100px] items-center justify-center text-xs sm:text-sm font-medium",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Page "}),K.getState().pagination.pageIndex+1," of"," ",K.getPageCount()]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.$,{"aria-label":"Go to first page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>K.setPageIndex(0),disabled:!K.getCanPreviousPage(),children:(0,t.jsx)(y.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to previous page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>K.previousPage(),disabled:!K.getCanPreviousPage(),children:(0,t.jsx)(C.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to next page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>K.nextPage(),disabled:!K.getCanNextPage(),children:(0,t.jsx)(A.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to last page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>K.setPageIndex(K.getPageCount()-1),disabled:!K.getCanNextPage(),children:(0,t.jsx)(S.A,{className:"h-4 w-4","aria-hidden":"true"})})]})]})]})]})}var M=a(25121),O=a(12472),T=a(29329),D=a(25548),W=a(52897),E=a(54333),K=a(50437),L=a(31621);let Z=[{header:()=>(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Order ID"})}),accessorKey:"id",size:100,maxSize:120,minSize:80,cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:["#",s.original.id]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(O.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Name"})]}),accessorKey:"name",size:180,maxSize:220,minSize:120,cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,t.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(O.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})}),(0,t.jsx)("span",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:s.original.name})]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Phone"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 sm:hidden",children:"Tel"})]}),accessorKey:"phone",size:140,maxSize:160,minSize:100,cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 font-mono whitespace-nowrap",children:s.original.phone})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Email"})]}),accessorKey:"email",size:200,maxSize:250,minSize:150,cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{className:"text-sm text-blue-600 hover:underline cursor-pointer max-w-[200px] truncate",title:s.original.email,children:s.original.email})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Order Date"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 sm:hidden",children:"Date"})]}),accessorKey:"orderDate",size:120,maxSize:150,minSize:100,cell:e=>{let{row:s}=e,a=new Date(s.original.orderDate);return(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"font-medium",children:(0,L.GP)(a,"MMM dd")}),(0,t.jsx)("div",{className:"text-xs text-gray-400 hidden sm:block",children:(0,L.GP)(a,"hh:mm a")})]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Table"})]}),accessorKey:"tableName",cell:e=>{let{row:s}=e;return(0,t.jsxs)(M.E,{variant:"outline",className:"font-medium",children:[s.original.tableName," Table"]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(K.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Seats"})]}),accessorKey:"seats",cell:e=>{let{row:s}=e,a=s.original.seats;if(!a||0===a.length)return(0,t.jsx)(M.E,{variant:"secondary",children:"No seats"});let l=a.slice(0,3),r=a.length-l.length;return(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[l.map((e,s)=>(0,t.jsx)(M.E,{variant:"outline",className:"rounded-full border-gray-300 bg-gray-50 px-2 py-0.5 text-xs text-gray-700 hover:bg-gray-100",children:e.TableSeats.title},s)),r>0&&(0,t.jsxs)(M.E,{variant:"secondary",className:"rounded-full px-2 py-0.5 text-xs text-gray-600",title:a.slice(3).map(e=>e.TableSeats.title).join(", "),children:["+",r," more"]})]})}}];var I=a(22130);function F(e){let{invoices:s,pageCount:a}=e,l=(null==s?void 0:s.length)||0,r=s?new Set(s.map(e=>e.email)).size:0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(I.Zp,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-blue-100",children:(0,t.jsx)(I.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,t.jsx)(W.A,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Orders"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:l})]})]})})}),(0,t.jsx)(I.Zp,{className:"border-0 shadow-sm bg-gradient-to-r from-green-50 to-green-100",children:(0,t.jsx)(I.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,t.jsx)(K.A,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Unique Customers"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-900",children:r})]})]})})})]}),(0,t.jsxs)(I.Zp,{className:"border-0 shadow-sm",children:[(0,t.jsx)(I.aR,{children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(I.ZB,{className:"text-xl font-semibold text-gray-900",children:"All Orders"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete list of customer orders and reservations"})]})})}),(0,t.jsx)(I.Wu,{className:"p-2",children:s&&s.length>0?(0,t.jsx)(k,{columns:Z,data:s,pageCount:a||0,className:"border-none"}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,t.jsx)(W.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),(0,t.jsx)("p",{className:"text-gray-600 text-center",children:"There are no orders to display at the moment."})]})})]})]})}var G=a(71569),U=a(13261);let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultPage:s=1,defaultLimit:a=10}=e,t=(0,R.useSearchParams)(),l=(0,R.useRouter)().push;return{page:Number(t.get("page")||s),pageLimit:Number(t.get("limit")||a),searchParams:t,setSearchParams:e=>{let s=new URLSearchParams(t.toString());Object.entries(e).forEach(e=>{let[a,t]=e;s.set(a,t)}),l(s.toString())}}};var H=a(36669),B=a(5565);let V=()=>{var e,s,a;let{data:r,refetch:i}=(0,H.K)(),{page:d,pageLimit:c}=_(),{data:o}=(0,H.e)({page:d,limit:c}),[m,x]=(0,n.useState)("Order list"),h=(null==o?void 0:null===(e=o.orders)||void 0===e?void 0:e.length)||0,u=(null==r?void 0:r.length)||0,p=(null==r?void 0:r.reduce((e,s)=>e+s.seats.filter(e=>"ordered"===e.status).length,0))||0,g=(null==r?void 0:r.reduce((e,s)=>e+s.seats.filter(e=>"available"===e.status).length,0))||0,f=[{title:"Total Orders",value:h,icon:W.A,description:"Orders this month",color:"bg-blue-500"},{title:"Total Tables",value:u,icon:G.A,description:"Available tables",color:"bg-purple-500"},{title:"Ordered Seats",value:p,icon:K.A,description:"Currently ordered",color:"bg-orange-500"},{title:"Available Seats",value:g,icon:U.A,description:"Ready for booking",color:"bg-green-500"}];return(0,t.jsx)("div",{className:"min-h-screen bg-[#F9D9B1]",children:(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-y-2",children:[(0,t.jsx)(B.default,{src:"/navbar/logo.png",alt:"logo",width:240,height:50}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Welcome back! Here's what's happening at your restaurant."})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((e,s)=>(0,t.jsxs)(l.Zp,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 bg-white",children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color," text-white"),children:(0,t.jsx)(e.icon,{className:"h-4 w-4"})})]}),(0,t.jsxs)(l.Wu,{className:"pt-0",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]},s))}),(0,t.jsxs)(l.Zp,{className:"border-0 shadow-md bg-white",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,t.jsx)("div",{children:(0,t.jsx)(l.ZB,{className:"text-xl font-semibold text-gray-900",children:"Management"})}),(0,t.jsx)("div",{className:"flex bg-gray-100 p-1 rounded-lg space-x-1",children:["Order list","Table Seats"].map(e=>(0,t.jsx)(l.$n,{variant:m===e?"default":"ghost",className:"px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ".concat(m===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),onClick:()=>x(e),children:e},e))})]})}),(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"min-h-[650px]",children:["Order list"===m&&(0,t.jsx)(F,{invoices:null!==(a=null==o?void 0:o.orders)&&void 0!==a?a:[],page:d,pageCount:null==o?void 0:null===(s=o.pagination)||void 0===s?void 0:s.totalPages}),"Table Seats"===m&&(0,t.jsx)(l.Z_,{refetch:i,data:r})]})})]})]})})},$=()=>{let[e,s]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{localStorage.getItem("token")||(0,R.redirect)("/admin/login"),s(!0)},[]),e)?(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"Loading..."}),children:(0,t.jsx)(V,{})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[688,494,107,142,572,522,203,274,333,309,219,48,441,517,358],()=>s(38838)),_N_E=e.O()}]);