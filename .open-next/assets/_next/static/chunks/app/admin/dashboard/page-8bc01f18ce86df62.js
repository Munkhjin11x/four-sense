(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{38838:(e,s,a)=>{Promise.resolve().then(a.bind(a,82865))},82865:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ea});var t=a(95155),l=a(49048),r=a(36669),n=a(21567),i=a(73312),d=a(12115),c=a(21868);let o=d.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(c.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...r,children:[(0,t.jsx)(c.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(m,{}),(0,t.jsx)(c.OK,{})]})});o.displayName=c.bL.displayName;let m=d.forwardRef((e,s)=>{let{className:a,orientation:l="vertical",...r}=e;return(0,t.jsx)(c.VM,{ref:s,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...r,children:(0,t.jsx)(c.lr,{className:"relative flex-1 rounded-full bg-border"})})});m.displayName=c.VM.displayName;var x=a(50354),h=a(32645),p=a(52488),u=a(27193);let g=x.bL;x.YJ;let f=x.WT,j=d.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(x.l9,{ref:s,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[l,(0,t.jsx)(x.In,{asChild:!0,children:(0,t.jsx)(h.A,{className:"h-4 w-4 opacity-50"})})]})});j.displayName=x.l9.displayName;let N=d.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.PP,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})});N.displayName=x.PP.displayName;let v=d.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.wn,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})});v.displayName=x.wn.displayName;let b=d.forwardRef((e,s)=>{let{className:a,children:l,position:r="popper",...i}=e;return(0,t.jsx)(x.ZL,{children:(0,t.jsxs)(x.UC,{ref:s,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:[(0,t.jsx)(N,{}),(0,t.jsx)(x.LM,{className:(0,n.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(v,{})]})})});b.displayName=x.UC.displayName,d.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.JU,{ref:s,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=x.JU.displayName;let w=d.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(x.q7,{ref:s,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(x.VF,{children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})}),(0,t.jsx)(x.p4,{children:l})]})});w.displayName=x.q7.displayName,d.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.wv,{ref:s,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=x.wv.displayName;var y=a(72508),S=a(98675),C=a(17884),A=a(89789),z=a(19083),P=a(25012),k=a(15325),R=a(76046);function O(e){var s,a,l;let{columns:r,data:c,pageCount:x,pageSizeOptions:h=[1,10,20,30,40,50],className:p}=e,u=(0,R.useSearchParams)(),N=(0,R.useRouter)(),v=Number(null!==(a=null==u?void 0:u.get("page"))&&void 0!==a?a:"1"),O=isNaN(v)||v<1?1:v,M=Number(null!==(l=null==u?void 0:u.get("limit"))&&void 0!==l?l:"10"),D=isNaN(M)?10:M,[{pageIndex:E,pageSize:I},T]=d.useState({pageIndex:O-1,pageSize:D});d.useEffect(()=>{let e=new URLSearchParams(u.toString());e.set("page",(E+1).toString()),e.set("limit",I.toString()),N.push("?".concat(e.toString()))},[E,I,u,N]);let W=(0,A.N4)({data:c,columns:r,pageCount:null!=x?x:-1,getCoreRowModel:(0,z.HT)(),getFilteredRowModel:(0,z.hM)(),state:{pagination:{pageIndex:E,pageSize:I}},onPaginationChange:T,getPaginationRowModel:(0,z.kW)(),manualPagination:!0,manualFiltering:!0,enableColumnResizing:!0,columnResizeMode:"onChange"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o,{className:(0,n.cn)("h-[calc(80vh-220px)] w-full overflow-auto rounded-md border md:h-[calc(80dvh-80px)]",p),children:[(0,t.jsxs)(y.XI,{className:"relative min-w-[800px] table-fixed",children:[(0,t.jsx)(y.A0,{children:W.getHeaderGroups().map(e=>(0,t.jsx)(y.Hj,{children:e.headers.map(e=>(0,t.jsx)(y.nd,{style:{width:e.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"whitespace-nowrap px-2 sm:px-4 py-3 text-left font-medium text-xs sm:text-sm",children:e.isPlaceholder?null:(0,A.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(y.BF,{children:(null===(s=W.getRowModel().rows)||void 0===s?void 0:s.length)?W.getRowModel().rows.map(e=>(0,t.jsx)(y.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(y.nA,{style:{width:e.column.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"px-2 sm:px-4 py-3 text-xs sm:text-sm",children:(0,A.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(y.Hj,{children:(0,t.jsx)(y.nA,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]}),(0,t.jsx)(m,{orientation:"horizontal"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2 space-x-2 py-4 sm:flex-row",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 text-xs sm:text-sm text-muted-foreground",children:[W.getFilteredSelectedRowModel().rows.length," of"," ",W.getFilteredRowModel().rows.length," row(s) selected."]}),(0,t.jsx)("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"whitespace-nowrap text-xs sm:text-sm font-medium",children:"Per page"}),(0,t.jsxs)(g,{value:"".concat(W.getState().pagination.pageSize),onValueChange:e=>{W.setPageSize(Number(e))},children:[(0,t.jsx)(j,{className:"h-8 w-[70px]",children:(0,t.jsx)(f,{placeholder:W.getState().pagination.pageSize})}),(0,t.jsx)(b,{side:"top",children:h.map(e=>(0,t.jsx)(w,{value:"".concat(e),children:e},e))})]})]})})]}),(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 sm:justify-end",children:[(0,t.jsxs)("div",{className:"flex w-[80px] sm:w-[100px] items-center justify-center text-xs sm:text-sm font-medium",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Page "}),W.getState().pagination.pageIndex+1," of"," ",W.getPageCount()]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.$,{"aria-label":"Go to first page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>W.setPageIndex(0),disabled:!W.getCanPreviousPage(),children:(0,t.jsx)(S.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to previous page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>W.previousPage(),disabled:!W.getCanPreviousPage(),children:(0,t.jsx)(P.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to next page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>W.nextPage(),disabled:!W.getCanNextPage(),children:(0,t.jsx)(k.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(i.$,{"aria-label":"Go to last page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>W.setPageIndex(W.getPageCount()-1),disabled:!W.getCanNextPage(),children:(0,t.jsx)(C.A,{className:"h-4 w-4","aria-hidden":"true"})})]})]})]})]})}var M=a(25121),D=a(12472),E=a(29329),I=a(25548),T=a(52897),W=a(54333),G=a(50437),K=a(689),L=a(31621);let F=(e,s)=>[{header:()=>(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Order ID"})}),accessorKey:"id",size:100,maxSize:120,minSize:80,cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:["#",s.original.id]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Name"})]}),accessorKey:"name",size:180,maxSize:220,minSize:120,cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,t.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(D.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})}),(0,t.jsx)("span",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:s.original.name})]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Phone"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 sm:hidden",children:"Tel"})]}),accessorKey:"phone",size:140,maxSize:160,minSize:100,cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 font-mono whitespace-nowrap",children:s.original.phone})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Email"})]}),accessorKey:"email",size:200,maxSize:250,minSize:150,cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{className:"text-sm text-blue-600 hover:underline cursor-pointer max-w-[200px] truncate",title:s.original.email,children:s.original.email})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Order Date"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 sm:hidden",children:"Date"})]}),accessorKey:"orderDate",size:120,maxSize:150,minSize:100,cell:e=>{let{row:s}=e,a=new Date(s.original.orderDate);return(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"font-medium",children:(0,L.GP)(a,"MMM dd")}),(0,t.jsx)("div",{className:"text-xs text-gray-400 hidden sm:block",children:(0,L.GP)(a,"hh:mm a")})]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Table"})]}),accessorKey:"tableName",cell:e=>{let{row:s}=e;return(0,t.jsxs)(M.E,{variant:"outline",className:"font-medium",children:[s.original.tableName," Table"]})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(G.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Seats"})]}),accessorKey:"seats",cell:e=>{let{row:s}=e,a=s.original.seats;if(!a||0===a.length)return(0,t.jsx)(M.E,{variant:"secondary",children:"No seats"});let l=a.slice(0,3),r=a.length-l.length;return(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[l.map((e,s)=>(0,t.jsx)(M.E,{variant:"outline",className:"rounded-full border-gray-300 bg-gray-50 px-2 py-0.5 text-xs text-gray-700 hover:bg-gray-100",children:e.TableSeats.title},s)),r>0&&(0,t.jsxs)(M.E,{variant:"secondary",className:"rounded-full px-2 py-0.5 text-xs text-gray-600",title:a.slice(3).map(e=>e.TableSeats.title).join(", "),children:["+",r," more"]})]})}},{header:()=>(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"Status"})}),accessorKey:"status",size:120,cell:e=>{let{row:s}=e,a=s.original.status,l={pending:{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",text:"Pending"},approved:{variant:"default",className:"bg-green-100 text-green-800 border-green-300",text:"Approved"},cancelled:{variant:"destructive",className:"bg-red-100 text-red-800 border-red-300",text:"Cancelled"}},r=l[a]||l.pending;return(0,t.jsx)(M.E,{variant:r.variant,className:r.className,children:r.text})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-700 hidden sm:inline",children:"Actions"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700 sm:hidden",children:"Act"})]}),id:"actions",size:120,maxSize:150,minSize:80,cell:a=>{let{row:l}=a,r=l.original,n="pending"===r.status,d="cancelled"===r.status;return(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.$,{size:"sm",variant:"outline",className:"flex items-center h-8 px-2 min-w-[32px]  text-green-600 border-green-300 hover:bg-green-50 text-xs sm:text-sm",onClick:e(r.id),title:"Approve order",children:[(0,t.jsx)(u.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"hidden lg:ml-1 lg:inline",children:"Approve"})]}),(0,t.jsxs)(i.$,{size:"sm",variant:"outline",className:"flex items-center h-8 px-2 min-w-[32px]  text-red-600 border-red-300 hover:bg-red-50 text-xs sm:text-sm",onClick:s(r.id),title:"Cancel order",children:[(0,t.jsx)(K.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"hidden lg:ml-1 lg:inline",children:"Cancel"})]})]}),!n&&!d&&(0,t.jsxs)(M.E,{variant:"outline",className:"text-xs text-gray-600 px-2 py-0.5 rounded-full whitespace-nowrap",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"approved"===r.status?"Approved":"No actions"}),(0,t.jsx)("span",{className:"sm:hidden"})]}),d&&(0,t.jsxs)(M.E,{variant:"secondary",className:"text-xs text-gray-600 px-2 py-0.5 rounded-full whitespace-nowrap",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Cancelled"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Cancel"})]})]})}}];var Z=a(22130),$=a(30814),H=a(51344);let U=e=>{let{title:s,description:a="",isOpen:l,onClose:r,children:i,rightSideContent:d,className:c,defaultPadding:o=!0,containerClassname:m="",closeActive:x=!0,onWheel:h}=e;return(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,t.jsx)(H.lG,{open:l,onOpenChange:e=>{e||r()},children:(0,t.jsxs)(H.Cf,{className:(0,n.cn)("flex h-screen flex-col !p-0 sm:grid sm:h-auto",c),onWheel:h,children:[(0,t.jsxs)(H.c7,{className:"flex h-fit w-full flex-row items-center justify-between gap-1.5 space-y-0 border-b border-gray-200 p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 ",children:[x&&(0,t.jsx)(H.HM,{children:(0,t.jsx)(K.A,{})}),(0,t.jsx)(H.L3,{children:s})]}),(0,t.jsx)(H.rr,{children:a})]}),(0,t.jsx)("div",{children:d&&d})]}),(0,t.jsx)("div",{className:(0,n.cn)("overflow-auto",o&&"p-4",m),children:i})]})})})},_=e=>{let{isOpen:s,onClose:a,onApproval:l,title:r}=e;return(0,t.jsxs)(U,{isOpen:s,onClose:a,children:[(0,t.jsx)("div",{className:"flex w-full flex-col items-center gap-4 p-4",children:(0,t.jsxs)("p",{className:"mb-2 text-center text-2xl font-semibold text-warning-400",children:["Are you sure you want to this ",r," ?"]})}),(0,t.jsxs)("div",{className:"flex h-fit w-full gap-2 border-t border-gray-200 p-4",children:[(0,t.jsx)(i.$,{className:"h-full w-full",variant:"outline",onClick:a,children:"No"}),(0,t.jsx)(i.$,{className:"h-full w-full",onClick:()=>{try{l(),a()}catch(e){$.o.error(e.message)}},children:"Yes"})]})]})};function B(e){let{invoices:s,pageCount:a,refetch:l}=e,n=(null==s?void 0:s.length)||0,i=s?new Set(s.map(e=>e.email)).size:0,[c,o]=(0,d.useState)(!1),{mutate:m}=(0,r.l3)(l),{mutate:x}=(0,r.s8)(l),[h,p]=(0,d.useState)(null),[u,g]=(0,d.useState)(null);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(Z.Zp,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-blue-100",children:(0,t.jsx)(Z.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,t.jsx)(T.A,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Orders"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:n})]})]})})}),(0,t.jsx)(Z.Zp,{className:"border-0 shadow-sm bg-gradient-to-r from-green-50 to-green-100",children:(0,t.jsx)(Z.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,t.jsx)(G.A,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Unique Customers"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-900",children:i})]})]})})})]}),(0,t.jsxs)(Z.Zp,{className:"border-0 shadow-sm",children:[(0,t.jsx)(Z.aR,{children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(Z.ZB,{className:"text-xl font-semibold text-gray-900",children:"All Orders"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete list of customer orders and reservations"})]})})}),(0,t.jsx)(Z.Wu,{className:"p-2",children:s&&s.length>0?(0,t.jsx)(O,{columns:F(e=>()=>{console.log("approveOrder",e),o(!0),p(e),g("approve")},e=>()=>{o(!0),p(e),g("cancel")}),data:s,pageCount:a||0,className:"border-none"}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,t.jsx)(T.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),(0,t.jsx)("p",{className:"text-gray-600 text-center",children:"There are no orders to display at the moment."})]})})]}),(0,t.jsx)(_,{title:"approve"===u?"Approve":"Cancel",isOpen:c,onClose:()=>o(!1),onApproval:()=>{null!==h&&u&&("approve"===u?m({orderId:h}):x({orderId:h})),o(!1),p(null),g(null)}})]})}var J=a(71569),V=a(13261);let q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultPage:s=1,defaultLimit:a=10}=e,t=(0,R.useSearchParams)(),l=(0,R.useRouter)().push;return{page:Number(t.get("page")||s),pageLimit:Number(t.get("limit")||a),searchParams:t,setSearchParams:e=>{let s=new URLSearchParams(t.toString());Object.entries(e).forEach(e=>{let[a,t]=e;s.set(a,t)}),l(s.toString())}}};var Y=a(5565),X=a(48173),Q=a.n(X),ee=a(7859);let es=()=>{var e,s,a;let{data:n,refetch:i}=(0,r.K2)(),{page:c,pageLimit:o}=q(),{data:m,refetch:x}=(0,r.em)({page:c,limit:o}),[h,p]=(0,d.useState)("Order list"),u=(0,d.useCallback)(()=>{x(),i()},[x,i]),g=(null==m?void 0:null===(e=m.orders)||void 0===e?void 0:e.length)||0,f=(null==n?void 0:n.length)||0,j=(null==n?void 0:n.reduce((e,s)=>e+s.seats.filter(e=>"ordered"===e.status).length,0))||0,N=(null==n?void 0:n.reduce((e,s)=>e+s.seats.filter(e=>"available"===e.status).length,0))||0,v=[{title:"Total Orders",value:g,icon:T.A,description:"Orders this month",color:"bg-blue-500"},{title:"Total Tables",value:f,icon:J.A,description:"Available tables",color:"bg-purple-500"},{title:"Ordered Seats",value:j,icon:G.A,description:"Currently ordered",color:"bg-orange-500"},{title:"Available Seats",value:N,icon:V.A,description:"Ready for booking",color:"bg-green-500"}];return(0,t.jsx)("div",{className:"min-h-screen bg-[#F9D9B1]",children:(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,t.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-y-2",children:[(0,t.jsx)(Q(),{href:"/",children:(0,t.jsx)(Y.default,{src:"/navbar/logo.png",alt:"logo",width:240,height:50})}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Welcome back! Here's what's happening at your restaurant."})]}),(0,t.jsx)(l.$n,{onClick:()=>{(0,ee.eF)(),(0,R.redirect)("/admin/login")},className:"border-[#D9864E] text-[#D9864E]",variant:"outline",children:"Logout"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((e,s)=>(0,t.jsxs)(l.Zp,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 bg-white",children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color," text-white"),children:(0,t.jsx)(e.icon,{className:"h-4 w-4"})})]}),(0,t.jsxs)(l.Wu,{className:"pt-0",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]},s))}),(0,t.jsxs)(l.Zp,{className:"border-0 shadow-md bg-white",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,t.jsx)("div",{children:(0,t.jsx)(l.ZB,{className:"text-xl font-semibold text-gray-900",children:"Management"})}),(0,t.jsx)("div",{className:"flex bg-gray-100 p-1 rounded-lg space-x-1",children:["Order list","Table Seats"].map(e=>(0,t.jsx)(l.$n,{variant:h===e?"default":"ghost",className:"px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ".concat(h===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),onClick:()=>p(e),children:e},e))})]})}),(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"min-h-[650px]",children:["Order list"===h&&(0,t.jsx)(B,{refetch:u,invoices:null!==(a=null==m?void 0:m.orders)&&void 0!==a?a:[],page:c,pageCount:null==m?void 0:null===(s=m.pagination)||void 0===s?void 0:s.totalPages}),"Table Seats"===h&&(0,t.jsx)(l.Z_,{refetch:i,data:n})]})})]})]})})},ea=()=>{let[e,s]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{(0,ee.GG)()||(0,R.redirect)("/admin/login"),s(!0)},[]),e)?(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"Loading..."}),children:(0,t.jsx)(es,{})}):null}},7859:(e,s,a)=>{"use strict";a.d(s,{GG:()=>l,TB:()=>t,eF:()=>r});let t=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,a=Date.now();localStorage.setItem("token",JSON.stringify({token:e,expiresAt:a+36e5*s}))},l=()=>{try{let e=localStorage.getItem("token");if(!e)return null;let s=JSON.parse(e);if(Date.now()>s.expiresAt)return localStorage.removeItem("token"),null;return s.token}catch(e){return console.error("Error parsing token data:",e),localStorage.removeItem("token"),null}},r=()=>{localStorage.removeItem("token")}}},e=>{var s=s=>e(e.s=s);e.O(0,[688,494,107,142,572,536,929,274,108,309,810,48,441,517,358],()=>s(38838)),_N_E=e.O()}]);