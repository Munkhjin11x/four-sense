(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{38838:(e,a,t)=>{Promise.resolve().then(t.bind(t,5895))},5895:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var l=t(95155),s=t(49048),r=t(21567),i=t(73312),n=t(12115),d=t(21868);let o=n.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,l.jsxs)(d.bL,{ref:a,className:(0,r.cn)("relative overflow-hidden",t),...i,children:[(0,l.jsx)(d.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,l.jsx)(c,{}),(0,l.jsx)(d.OK,{})]})});o.displayName=d.bL.displayName;let c=n.forwardRef((e,a)=>{let{className:t,orientation:s="vertical",...i}=e;return(0,l.jsx)(d.VM,{ref:a,orientation:s,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,l.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=d.VM.displayName;var m=t(63409),u=t(32645),h=t(52488),x=t(27193);let p=m.bL;m.YJ;let f=m.WT,g=n.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,l.jsxs)(m.l9,{ref:a,className:(0,r.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[s,(0,l.jsx)(m.In,{asChild:!0,children:(0,l.jsx)(u.A,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=m.l9.displayName;let j=n.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(m.PP,{ref:a,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,l.jsx)(h.A,{className:"h-4 w-4"})})});j.displayName=m.PP.displayName;let N=n.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(m.wn,{ref:a,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,l.jsx)(u.A,{className:"h-4 w-4"})})});N.displayName=m.wn.displayName;let w=n.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...n}=e;return(0,l.jsx)(m.ZL,{children:(0,l.jsxs)(m.UC,{ref:a,className:(0,r.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,l.jsx)(j,{}),(0,l.jsx)(m.LM,{className:(0,r.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(N,{})]})})});w.displayName=m.UC.displayName,n.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(m.JU,{ref:a,className:(0,r.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=m.JU.displayName;let v=n.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,l.jsxs)(m.q7,{ref:a,className:(0,r.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(m.VF,{children:(0,l.jsx)(x.A,{className:"h-4 w-4"})})}),(0,l.jsx)(m.p4,{children:s})]})});v.displayName=m.q7.displayName,n.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(m.wv,{ref:a,className:(0,r.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=m.wv.displayName;var b=t(72508),y=t(98675),S=t(17884),P=t(89789),C=t(19083),R=t(25012),z=t(15325),k=t(76046);function M(e){var a,t,s;let{columns:d,data:m,pageCount:u,pageSizeOptions:h=[1,10,20,30,40,50],className:x}=e,j=(0,k.useSearchParams)(),N=(0,k.useRouter)(),M=Number(null!==(t=null==j?void 0:j.get("page"))&&void 0!==t?t:"1"),A=isNaN(M)||M<1?1:M,K=Number(null!==(s=null==j?void 0:j.get("limit"))&&void 0!==s?s:"10"),L=isNaN(K)?10:K,[{pageIndex:D,pageSize:I},O]=n.useState({pageIndex:A-1,pageSize:L});n.useEffect(()=>{let e=new URLSearchParams(j.toString());e.set("page",(D+1).toString()),e.set("limit",I.toString()),N.push("?".concat(e.toString()))},[D,I,j,N]);let F=(0,P.N4)({data:m,columns:d,pageCount:null!=u?u:-1,getCoreRowModel:(0,C.HT)(),getFilteredRowModel:(0,C.hM)(),state:{pagination:{pageIndex:D,pageSize:I}},onPaginationChange:O,getPaginationRowModel:(0,C.kW)(),manualPagination:!0,manualFiltering:!0,enableColumnResizing:!0,columnResizeMode:"onChange"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o,{className:(0,r.cn)("h-[calc(80vh-220px)] w-full overflow-auto rounded-md border md:h-[calc(80dvh-80px)]",x),children:[(0,l.jsxs)(b.XI,{className:"relative min-w-full table-fixed",children:[(0,l.jsx)(b.A0,{children:F.getHeaderGroups().map(e=>(0,l.jsx)(b.Hj,{children:e.headers.map(e=>(0,l.jsx)(b.nd,{style:{width:e.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"whitespace-nowrap px-4 py-3 text-left font-medium",children:e.isPlaceholder?null:(0,P.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(b.BF,{children:(null===(a=F.getRowModel().rows)||void 0===a?void 0:a.length)?F.getRowModel().rows.map(e=>(0,l.jsx)(b.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(b.nA,{style:{width:e.column.getSize(),minWidth:e.column.columnDef.minSize,maxWidth:e.column.columnDef.maxSize},className:"px-4 py-3 text-sm",children:(0,P.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(b.Hj,{children:(0,l.jsx)(b.nA,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]}),(0,l.jsx)(c,{orientation:"horizontal"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2 space-x-2 py-4 sm:flex-row",children:[(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[F.getFilteredSelectedRowModel().rows.length," of"," ",F.getFilteredRowModel().rows.length," row(s) selected."]}),(0,l.jsx)("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{className:"whitespace-nowrap text-sm font-medium",children:"Rows per page"}),(0,l.jsxs)(p,{value:"".concat(F.getState().pagination.pageSize),onValueChange:e=>{F.setPageSize(Number(e))},children:[(0,l.jsx)(g,{className:"h-8 w-[70px]",children:(0,l.jsx)(f,{placeholder:F.getState().pagination.pageSize})}),(0,l.jsx)(w,{side:"top",children:h.map(e=>(0,l.jsx)(v,{value:"".concat(e),children:e},e))})]})]})})]}),(0,l.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 sm:justify-end",children:[(0,l.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",F.getState().pagination.pageIndex+1," of"," ",F.getPageCount()]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(i.$,{"aria-label":"Go to first page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>F.setPageIndex(0),disabled:!F.getCanPreviousPage(),children:(0,l.jsx)(y.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,l.jsx)(i.$,{"aria-label":"Go to previous page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>F.previousPage(),disabled:!F.getCanPreviousPage(),children:(0,l.jsx)(R.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,l.jsx)(i.$,{"aria-label":"Go to next page",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>F.nextPage(),disabled:!F.getCanNextPage(),children:(0,l.jsx)(z.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,l.jsx)(i.$,{"aria-label":"Go to last page",variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>F.setPageIndex(F.getPageCount()-1),disabled:!F.getCanNextPage(),children:(0,l.jsx)(S.A,{className:"h-4 w-4","aria-hidden":"true"})})]})]})]})]})}let A=[{header:"Order ID",accessorKey:"id"},{header:"Name",accessorKey:"name"},{header:"Phone",accessorKey:"phone"},{header:"Email",accessorKey:"email"},{header:"Order Date",accessorKey:"orderDate"},{header:"Table Name",accessorKey:"tableName"},{header:"Seats",accessorKey:"seats",cell:e=>{var a;let{row:t}=e;return(null===(a=t.original.seats)||void 0===a?void 0:a.map(e=>e.title).join(", "))||"No seats"}}];function K(e){let{invoices:a,pageCount:t}=e;return(0,l.jsx)(l.Fragment,{children:a&&(0,l.jsx)(M,{columns:A,data:a,pageCount:t||0})})}let L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultPage:a=1,defaultLimit:t=10}=e,l=(0,k.useSearchParams)(),s=(0,k.useRouter)().push;return{page:Number(l.get("page")||a),pageLimit:Number(l.get("limit")||t),searchParams:l,setSearchParams:e=>{let a=new URLSearchParams(l.toString());Object.entries(e).forEach(e=>{let[t,l]=e;a.set(t,l)}),s(a.toString())}}};var D=t(36669);let I=()=>{var e,a;let{data:t,refetch:r}=(0,D.K)(),{page:i,pageLimit:d}=L(),{data:o}=(0,D.e)({page:i,limit:d}),[c,m]=(0,n.useState)("Order list");return(0,l.jsxs)("div",{className:" w-full flex flex-col bg-white p-4 h-full",children:[(0,l.jsx)("div",{className:"flex gap-2",children:["Order list","Table Seats"].map(e=>(0,l.jsx)(s.$n,{variant:"outline",className:"w-fit",onClick:()=>m(e),children:e},e))}),(0,l.jsxs)("div",{className:"w-full h-full mt-4",children:["Order list"===c&&(0,l.jsx)(K,{invoices:null!==(a=null==o?void 0:o.orders)&&void 0!==a?a:[],page:i,pageCount:null==o?void 0:null===(e=o.pagination)||void 0===e?void 0:e.totalPages}),"Table Seats"===c&&(0,l.jsx)(s.Z_,{refetch:r,data:t})]})]})},O=()=>{let[e,a]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{localStorage.getItem("token")||(0,k.redirect)("/admin/login"),a(!0)},[]),e)?(0,l.jsx)(n.Suspense,{fallback:(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"Loading..."}),children:(0,l.jsx)(I,{})}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[688,494,107,142,572,522,385,274,11,309,219,48,441,517,358],()=>a(38838)),_N_E=e.O()}]);