"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{88863:(e,t,a)=>{a.r(t),a.d(t,{TableSection:()=>es});var s=a(95155);let l=()=>(0,s.jsx)("div",{className:"border bg-white w-11 h-[380px] px-14 rounded-xl flex justify-center items-center border-[#000]",children:(0,s.jsx)("p",{className:"text-[#E36C2C] text-lg text-center font-bold",children:"DJ Table"})});var r=a(21567);let i=e=>{let{title:t,width:a,height:l}=e;return(0,s.jsx)("div",{style:{width:"".concat(a,"px"),height:"".concat(l,"px")},className:(0,r.cn)("border bg-white sm:w-[200px] relative rounded-xl hover:bg-[#FBEAD9] hover:border-[#E36C2C] flex justify-center px-14 items-center border-[#00000066]"),children:(0,s.jsx)("p",{className:"text-[#E36C2C] text-lg text-center font-bold",children:t})})};var o=a(12115);let n=e=>{let{title:t}=e;return(0,s.jsx)("div",{className:"rounded-full relative size-[56px] hover:bg-[#FBEAD9] hover:border-[#E36C2C] flex items-center justify-center bg-white text-white border border-[#00000066]",children:(0,s.jsxs)("p",{className:"text-[#E36C2C] text-lg text-center font-bold",children:[" ",t]})})};var d=a(5565),c=a(68629),x=a(62178);let m=e=>{let{seatNumber:t,rotate:a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center group",a),children:(0,s.jsxs)("div",{className:"relative w-10 h-8 bg-white group-hover:bg-[#FBEAD9] group-hover:border-[#E36C2C] rounded-lg z-30  flex items-center justify-center border-2 border-[#00000066]",children:[(0,s.jsx)("p",{className:(0,r.cn)("text-sm font-bold text-black",a),children:t}),(0,s.jsx)("div",{className:"w-7 h-5 bg-white group-hover:bg-[#FBEAD9] group-hover:border-[#E36C2C] rounded-b-lg mx-auto border-l-2 border-t-2 border-r-2 border-b-2 border-[#00000066] absolute top-7"})]})})};var u=a(1856),h=a(689),g=a(2291);let p=e=>{let{color:t="#E78140"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:(0,s.jsx)("path",{d:"M21.5 8H3.5M16.5 2V5M8.5 2V5M12.5 18V12M9.5 15H15.5M8.3 22H16.7C18.3802 22 19.2202 22 19.862 21.673C20.4265 21.3854 20.8854 20.9265 21.173 20.362C21.5 19.7202 21.5 18.8802 21.5 17.2V8.8C21.5 7.11984 21.5 6.27976 21.173 5.63803C20.8854 5.07354 20.4265 4.6146 19.862 4.32698C19.2202 4 18.3802 4 16.7 4H8.3C6.61984 4 5.77976 4 5.13803 4.32698C4.57354 4.6146 4.1146 5.07354 3.82698 5.63803C3.5 6.27976 3.5 7.11984 3.5 8.8V17.2C3.5 18.8802 3.5 19.7202 3.82698 20.362C4.1146 20.9265 4.57354 21.3854 5.13803 21.673C5.77976 22 6.61984 22 8.3 22Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},b=e=>{var t,a;let{tableId:l,seats:r,children:i,selectedSeats:o,setSelectedSeats:n,handleOrder:d,all:x}=e;return x?(0,s.jsx)(s.Fragment,{children:i}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.Bc,{children:(0,s.jsxs)(c.m_,{open:(null===(t=o[l])||void 0===t?void 0:t.length)>0,children:[(0,s.jsx)(c.k$,{asChild:!0,children:(0,s.jsx)("div",{className:"cursor-pointer",children:i})}),o&&(0,s.jsxs)(c.ZI,{className:"bg-white p-2 rounded shadow-lg w-48",children:[(0,s.jsx)(h.A,{onClick:()=>n({...o,[l]:[]}),className:"absolute top-2 right-2"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2]",children:[(0,s.jsxs)("h4",{className:"font-bold",children:["Table ",l]}),r.map((e,t)=>{var a,r;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.S,{id:"seat-".concat(l,"-").concat(t),className:"cursor-pointer size-4",checked:null===(r=o[l])||void 0===r?void 0:r.includes(null===(a=e._id)||void 0===a?void 0:a.$oid),disabled:"ordered"===e.status,onCheckedChange:t=>{var a,s;let r=t?[...o[l]||[],null===(a=e._id)||void 0===a?void 0:a.$oid]:(null===(s=o[l])||void 0===s?void 0:s.filter(t=>{var a;return t!==(null===(a=e._id)||void 0===a?void 0:a.$oid)}))||[];n({...o,[l]:r})}}),(0,s.jsx)("label",{htmlFor:"seat-".concat(l,"-").concat(t),className:"text-sm",children:"".concat(l,"-").concat(t+1," chair")})]},t)}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.S,{onClick:()=>{let e=r.map((e,t)=>t).filter(e=>"ordered"!==r[e].status);n({...o,[l]:e.map(e=>{var t;return null===(t=r[e]._id)||void 0===t?void 0:t.$oid})})},id:"seat-".concat(l,"-all"),className:"size-4",checked:(null===(a=o[l])||void 0===a?void 0:a.length)===r.filter(e=>"ordered"!==e.status).length}),(0,s.jsx)("label",{htmlFor:"seat-".concat(l,"-all"),className:"text-sm",children:"Order table ".concat(l,".")})]}),(0,s.jsxs)(c.$n,{size:"sm",variant:"outline",onClick:()=>d(l),className:"mt-2 w-full border-[#E78140] text-[#E78140] rounded-none rounded-tl-3xl flex items-center justify-center",children:[(0,s.jsx)(p,{})," Order"]})]})]})]})})})};var v=a(19970),f=a(33900),y=a(82195),j=a.n(y),N=a(30814),w=a(69606),S=a(31621),C=a(52897),_=a(73312),E=a(25012),k=a(15325),A=a(89348);function O(e){let{className:t,classNames:a,showOutsideDays:l=!0,...i}=e;return(0,s.jsx)(A.hv,{showOutsideDays:l,className:(0,r.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,_.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,_.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(E.A,{className:(0,r.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(k.A,{className:(0,r.cn)("h-4 w-4",t),...a})}},...i})}O.displayName="Calendar";var F=a(32945);let $=F.bL,I=F.l9,T=o.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:i=4,...o}=e;return(0,s.jsx)(F.ZL,{children:(0,s.jsx)(F.UC,{ref:t,align:l,sideOffset:i,className:(0,r.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});T.displayName=F.UC.displayName;var P=a(12317),M=a(46195);let D=(0,a(31027).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(M.b,{ref:t,className:(0,r.cn)(D(),a),...l})});L.displayName=M.b.displayName;let z=o.createContext({}),H=e=>{let{...t}=e;return(0,s.jsx)(z.Provider,{value:{name:t.name},children:(0,s.jsx)(w.xI,{...t})})},R=()=>{let e=o.useContext(z),t=o.useContext(V),{getFieldState:a,formState:s}=(0,w.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=t;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...l}},V=o.createContext({}),q=o.forwardRef((e,t)=>{let{className:a,...l}=e,i=o.useId();return(0,s.jsx)(V.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,r.cn)("space-y-2",a),...l})})});q.displayName="FormItem";let B=o.forwardRef((e,t)=>{let{className:a,...l}=e,{error:i,formItemId:o}=R();return(0,s.jsx)(L,{ref:t,className:(0,r.cn)(i&&"text-destructive",a),htmlFor:o,...l})});B.displayName="FormLabel";let J=o.forwardRef((e,t)=>{let{...a}=e,{error:l,formItemId:r,formDescriptionId:i,formMessageId:o}=R();return(0,s.jsx)(P.DX,{ref:t,id:r,"aria-describedby":l?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!l,...a})});J.displayName="FormControl",o.forwardRef((e,t)=>{let{className:a,...l}=e,{formDescriptionId:i}=R();return(0,s.jsx)("p",{ref:t,id:i,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})}).displayName="FormDescription";let Z=o.forwardRef((e,t)=>{var a;let{className:l,children:i,...o}=e,{error:n,formMessageId:d}=R(),c=n?String(null!==(a=null==n?void 0:n.message)&&void 0!==a?a:""):i;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,r.cn)("text-sm font-medium text-destructive",l),...o,children:c}):null});Z.displayName="FormMessage";let U=e=>{let{control:t,name:a,label:l}=e,i=e=>e instanceof Date||"string"==typeof e?new Date(e):void 0,o=e=>e?(0,S.GP)(e,"LLL dd, y HH:mm"):"Pick a date and time",n=(e,t)=>{if(!e||!t)return e;let[a,s]=t.split(":").map(Number),l=new Date(e);return l.setHours(a,s),l};return(0,s.jsx)(H,{control:t,name:a,render:e=>{let{field:t}=e;return(0,s.jsxs)(q,{className:"w-full",children:[(0,s.jsx)(B,{className:"text-sm",children:l||"Date and Time"}),(0,s.jsx)(J,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(_.$,{id:"date",variant:"outline",className:(0,r.cn)("w-full justify-start px-2 text-left font-normal",!t.value&&"text-muted-foreground"),children:[(0,s.jsx)(C.A,{className:"mr-2"}),t.value?o(i(t.value)):(0,s.jsx)("p",{children:"Pick a date and time"})]})}),(0,s.jsx)(T,{className:"w-auto p-3",align:"start",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(O,{mode:"single",defaultMonth:i(t.value)||void 0,selected:i(t.value)||void 0,onSelect:e=>{if(e){let a=i(t.value);a&&e.setHours(a.getHours(),a.getMinutes()),t.onChange(e)}},numberOfMonths:1}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(B,{className:"text-sm",children:"Time"}),(0,s.jsx)(f.p,{type:"time",value:t.value?(0,S.GP)(i(t.value),"HH:mm"):"",onChange:e=>{let a=e.target.value,s=n(i(t.value),a);t.onChange(s||void 0)}})]})]})})]})}),(0,s.jsx)(Z,{})]})}})};var W=a(25848),K=a(34180),G=a(35454),X=a.n(G);let Q=(0,a(99827).v)(e=>({token:"",setToken:t=>e({token:t})})),Y=e=>{let{className:t}=e,{setToken:a}=Q(),l=(0,o.useCallback)(e=>{a(e)},[a]);return(0,s.jsx)(X(),{sitekey:"0x4AAAAAAB4B7J8B5z06f06B",className:(0,r.cn)("!w-full rounded-md",t),size:"flexible",theme:"light",onVerify:l})},ee=e=>{let{isOpen:t,onClose:a,seats:l,tableName:i,refetch:o}=e,n=(0,w.mN)({defaultValues:{fullName:"",email:"",phone:"",date:new Date}}),{mutate:d,isPending:x}=(0,W.n)({mutationFn:e=>(0,K.P3)({...e,seatIds:e.seatIds.map(e=>e.$oid)}),onSuccess:()=>{N.o.success("Order placed successfully"),n.reset(),a(),o()},onError:e=>{N.o.error(e.message||"Order placement failed")}}),{token:u}=Q();return(0,s.jsx)(v.a,{title:"".concat(i," Table"),isOpen:t,onClose:a,children:(0,s.jsx)(w.Op,{...n,children:(0,s.jsxs)("form",{onSubmit:n.handleSubmit(e=>{if(!u){N.o.error("Please complete the CAPTCHA verification");return}d({name:e.fullName,phone:e.phone,email:e.email,tableName:i,seatIds:l,date:e.date,turnstileToken:u})}),className:"grid w-full gap-10",children:[(0,s.jsx)(f.p,{...n.register("fullName",{required:"Full name is required"}),className:(0,r.cn)(j().className,"border-b rounded-none border-[#488457] placeholder:opacity-50 bg-transparent placeholder:text-[#488457] placeholder:text-2xl placeholder:font-semibold placeholder:font-roba"),placeholder:"FULL NAME"}),n.formState.errors.fullName&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:n.formState.errors.fullName.message}),(0,s.jsx)(f.p,{...n.register("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:(0,r.cn)(j().className,"border-b rounded-none border-[#488457] placeholder:opacity-50 bg-transparent placeholder:text-[#488457] placeholder:text-2xl placeholder:font-semibold placeholder:font-roba"),placeholder:"EMAIL ADDRESS"}),n.formState.errors.email&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:n.formState.errors.email.message}),(0,s.jsx)(f.p,{...n.register("phone",{required:"Phone number is required"}),className:(0,r.cn)(j().className,"border-b rounded-none border-[#488457] placeholder:opacity-50 bg-transparent placeholder:text-[#488457] placeholder:text-2xl placeholder:font-semibold placeholder:font-roba"),placeholder:"PHONE NUMBER"}),n.formState.errors.phone&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:n.formState.errors.phone.message}),(0,s.jsx)(U,{control:n.control,name:"date",label:"Date",className:"w-full"}),(0,s.jsx)("div",{className:"flex border flex-wrap gap-6 py-5 border-[#488457] pb-10 rounded-lg px-4",children:l.map((e,t)=>{var a;return(0,s.jsx)(m,{seatNumber:null!==(a=e.seatNumber)&&void 0!==a?a:t+1,rotate:"rotate-0"},"".concat(i,"-").concat(e.$oid,"-").concat(t))})},"".concat(i,"-").concat(l.join("-"))),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:(0,r.cn)(j().className,"text-[#488457] text-sm font-semibold"),children:"Please verify you're human:"}),(0,s.jsx)(Y,{className:"w-full"})]}),(0,s.jsx)(c.$n,{type:"submit",disabled:x,className:"bg-[#E78140] hover:bg-[#E78140]/90 text-white rounded-none rounded-tl-3xl",children:x?"Processing...":"Order"})]})})})};var et=a(75538),ea=a(36669);let es=()=>{let{width:e}=(0,u.A)(),[t,a]=(0,o.useState)({}),[l,r]=(0,o.useState)(!1),[i,n]=(0,o.useState)(!1),{data:h,isLoading:g,refetch:v}=(0,ea.K2)(),f=((e,t)=>e.map(e=>{let a=null==t?void 0:t.find(t=>t.tableName===e.id);if(a){var s;return{...e,seats:(null===(s=e.seats)||void 0===s?void 0:s.map((e,t)=>{let s=a.seats[t];return s?{...e,status:s.status,_id:s._id}:e}))||[]}}return e}))(e>1580?er:el,h),y=["dj-left","dj-right","mixologist"],j=(e,t)=>{y.includes(e)||a(a=>{let s=a[e]||[],l="object"==typeof t&&(null==t?void 0:t.$oid)?t.$oid:t;return s.includes(l)?{...a,[e]:s.filter(e=>e!==l)}:{...a,[e]:[...s,l]}})},N=e>1580?er:el,w=()=>{n(!0);let e={};N.forEach(t=>{t.seats&&t.seats.length>0&&(e[t.id]=Array.from({length:t.seats.length},(e,t)=>t.toString()))}),a(e),r(!0)},S=e=>{a(t=>{var a;return{...t,[e]:null!==(a=t[e])&&void 0!==a?a:[]}}),r(!0)};return g?(0,s.jsx)("div",{className:"h-screen w-full",children:(0,s.jsxs)("div",{className:"flex justify-center items-center h-full flex-col gap-10",children:[(0,s.jsx)(d.default,{src:"/home/logo.webp",alt:"",width:200,height:300}),(0,s.jsx)("p",{className:"text-white text-2xl font-bold animate-pulse",children:"Loading..."})]})}):(0,s.jsxs)("div",{className:"bg-[url('/menu/bg.png')] min-h-screen flex flex-col justify-between items-center bg-cover bg-center bg-no-repeat w-full",children:[(0,s.jsx)(et.default,{className:"w-full flex justify-center items-center",children:(0,s.jsx)(d.default,{src:"/menu/nomad.png",alt:"Nomad",width:1100,height:700,sizes:"100vw",className:"mt-24 w-full max-w-[1100px]"})}),(0,s.jsxs)("div",{className:"flex flex-col justify-between h-full gap-24 items-center w-full",children:[(0,s.jsx)(et.default,{children:(0,s.jsx)("div",{className:"flex justify-center relative items-center w-full h-[500px]",children:(0,s.jsx)("div",{className:"relative  w-full h-full max-2xl:overflow-auto",children:f.map(e=>{var l;return(0,s.jsx)("div",{className:"absolute",style:{left:e.x,top:e.y},children:(0,s.jsx)("div",{className:"relative cursor-pointer",children:(0,s.jsxs)(b,{all:i,handleOrder:S,setSelectedSeats:a,selectedSeats:t,tableId:e.id,seats:e.seats||[],children:[(0,s.jsx)("div",{onClick:()=>{var t,a;return j(e.id,null===(a=e.seats)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t._id.$oid)},children:e.children}),null===(l=e.seats)||void 0===l?void 0:l.map((a,l)=>{var r,i;return(0,s.jsx)("div",{style:{left:a.x,top:a.y},className:"absolute",children:(0,s.jsx)("div",{onClick:()=>j(e.id,a._id),className:"cursor-pointer ".concat((null===(i=t[e.id])||void 0===i?void 0:i.includes((null===(r=a._id)||void 0===r?void 0:r.$oid)||a._id))||"ordered"===a.status?"opacity-50":""),children:(0,s.jsx)(m,{seatNumber:l+1,rotate:a.rotate})})},l)})]})})},e.id)})})})}),(0,s.jsxs)("div",{className:"flex flex-col mb-24 gap-3 max-w-[300px] justify-center items-center w-full",children:[(0,s.jsxs)(c.$n,{onClick:()=>w(),variant:"ghost",className:"w-full border hover:bg-white/50 text-white rounded-tl-3xl",children:[(0,s.jsx)(p,{color:"white"})," Organizing events"]}),(0,s.jsxs)(c.$n,{variant:"ghost",className:"w-full border hover:bg-white/50 text-white rounded-tl-3xl",children:[(0,s.jsx)(x.s3,{color:"white"})," Event spaces at four sense"]})]})]}),(0,s.jsx)(ee,{refetch:v,tableName:i?" Organizing events":Object.keys(t)[0],isOpen:l,onClose:()=>{r(!1),a({}),n(!1)},seats:(()=>{if(i)return Object.values(t).flat().map(e=>({$oid:e.toString()}));let e=Object.keys(t)[0],a=f.find(t=>t.id===e);return(t[e]||[]).map(e=>{var t,s;let l=null!==(s=null==a?void 0:null===(t=a.seats)||void 0===t?void 0:t.findIndex(t=>{var a;return(null===(a=t._id)||void 0===a?void 0:a.$oid)===e||t._id===e}))&&void 0!==s?s:-1;return{$oid:e.toString(),seatNumber:l+1}})})()})]})},el=[{id:"dj-left",x:"5%",y:"30%",children:(0,s.jsx)(l,{})},{id:"mixologist",x:"270px",y:"45%",children:(0,s.jsx)(i,{title:"Mixologist",width:85,height:225})},{id:"c1",x:"400px",y:"53%",children:(0,s.jsx)(i,{title:"c1",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"ordered",x:"10%",y:"105%",rotate:"rotate-0"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"40%",y:"105%",rotate:"rotate-0"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"70%",y:"105%",rotate:"rotate-0"},{title:"Seat 1",image:"/table/seat.png",status:"ordered",x:"10%",y:"-40%",rotate:"rotate-180"},{title:"Seat 2",image:"/table/seat.png",status:"ordered",x:"40%",y:"-40%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"ordered",x:"70%",y:"-40%",rotate:"rotate-180"}]},{id:"c2",x:"590px",y:"50%",children:(0,s.jsx)(i,{title:"c2",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"ordered",x:"10%",y:"-40%",rotate:"rotate-180"},{title:"Seat 2",image:"/table/seat.png",status:"ordered",x:"40%",y:"-40%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"ordered",x:"70%",y:"-40%",rotate:"rotate-180"}]},{id:"c3",x:"780px",y:"51.5%",children:(0,s.jsx)(i,{title:"c3",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"10%",y:"105%",rotate:"rotate-0"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"40%",y:"105%",rotate:"rotate-0"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"70%",y:"105%",rotate:"rotate-0"}]},{id:"c4",x:"970px",y:"41.5%",children:(0,s.jsx)(i,{title:"c4",width:60,height:180}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"100%",y:"40%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"100%",y:"10%",rotate:"-rotate-90"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"100%",y:"70%",rotate:"-rotate-90"}]},{id:"a1",x:"1210px",y:"35%",children:(0,s.jsx)(n,{title:"a1"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a2",x:"1210px",y:"75%",children:(0,s.jsx)(n,{title:"a2"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a3",x:"1450px",y:"24%",children:(0,s.jsx)(n,{title:"a3"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a4",x:"1450px",y:"62%",children:(0,s.jsx)(n,{title:"a4"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a5",x:"1450px",y:"100%",children:(0,s.jsx)(n,{title:"a5"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"dj-right",x:"1700px",y:"30%",children:(0,s.jsx)(l,{})}],er=[{id:"dj-left",x:"5%",y:"30%",children:(0,s.jsx)(l,{})},{id:"mixologist",x:"15%",y:"45%",children:(0,s.jsx)(i,{title:"Mixologist",width:85,height:225})},{id:"c1",x:"22%",y:"53%",children:(0,s.jsx)(i,{title:"c1",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"10%",y:"105%",rotate:"rotate-0"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"40%",y:"105%",rotate:"rotate-0"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"70%",y:"105%",rotate:"rotate-0"},{title:"Seat 1",image:"/table/seat.png",status:"ordered",x:"10%",y:"-40%",rotate:"rotate-180"},{title:"Seat 2",image:"/table/seat.png",status:"ordered",x:"40%",y:"-40%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"ordered",x:"70%",y:"-40%",rotate:"rotate-180"}]},{id:"c2",x:"32.5%",y:"50%",children:(0,s.jsx)(i,{title:"c2",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"ordered",x:"10%",y:"-40%",rotate:"rotate-180"},{title:"Seat 2",image:"/table/seat.png",status:"ordered",x:"40%",y:"-40%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"ordered",x:"70%",y:"-40%",rotate:"rotate-180"}]},{id:"c3",x:"43.5%",y:"51.5%",children:(0,s.jsx)(i,{title:"c3",width:180,height:96}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"10%",y:"105%",rotate:"rotate-0"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"40%",y:"105%",rotate:"rotate-0"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"70%",y:"105%",rotate:"rotate-0"}]},{id:"c4",x:"54%",y:"41.5%",children:(0,s.jsx)(i,{title:"c4",width:60,height:180}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"100%",y:"40%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"100%",y:"10%",rotate:"-rotate-90"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"100%",y:"70%",rotate:"-rotate-90"}]},{id:"a1",x:"80%",y:"28%",children:(0,s.jsx)(n,{title:"a1"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a2",x:"80%",y:"68%",children:(0,s.jsx)(n,{title:"a2"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a3",x:"80%",y:"105%",children:(0,s.jsx)(n,{title:"a3"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a4",x:"68%",y:"50%",children:(0,s.jsx)(n,{title:"a4"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"a5",x:"68%",y:"86%",children:(0,s.jsx)(n,{title:"a5"}),seats:[{title:"Seat 1",image:"/table/seat.png",status:"available",x:"110%",y:"25%",rotate:"-rotate-90"},{title:"Seat 2",image:"/table/seat.png",status:"available",x:"12%",y:"-70%",rotate:"rotate-180"},{title:"Seat 3",image:"/table/seat.png",status:"available",x:"-80%",y:"25%",rotate:"rotate-90"},{title:"Seat 4",image:"/table/seat.png",status:"available",x:"12%",y:"110%",rotate:"rotate-0"}]},{id:"dj-right",x:"90%",y:"30%",children:(0,s.jsx)(l,{})}]},88904:(e,t,a)=>{a.r(t),a.d(t,{SeatsTableCard:()=>u});var s=a(95155),l=a(68629),r=a(12115),i=a(25848),o=a(34180),n=a(30814),d=a(2291),c=a(31342),x=a(654),m=a(50437);let u=e=>{let{data:t,refetch:a}=e,[u,h]=(0,r.useState)({}),[g,p]=(0,r.useState)(null),{mutate:b}=(0,i.n)({mutationFn:o.V9,onSuccess:()=>{n.o.success("Table seats updated"),p(null),a()},onError:()=>{n.o.error("Failed to update table seat")}}),v=(e,t,a)=>{p(e),h(s=>{let l=s[e]||[];return{...s,[e]:a?[...l,t]:l.filter(e=>e!==t)}})},f=(e,t)=>{var a;(null===(a=u[t])||void 0===a?void 0:a.length)&&(b({tableName:e,seatIds:u[t]}),h(e=>({...e,[t]:[]})))},y=e=>{switch(e){case"available":return(0,s.jsx)(c.A,{className:"h-4 w-4 text-green-600"});case"ordered":return(0,s.jsx)(x.A,{className:"h-4 w-4 text-red-600"});default:return null}},j=e=>{switch(e){case"available":return(0,s.jsx)(l.Ex,{variant:"success",className:"text-xs",children:"Available"});case"ordered":return(0,s.jsx)(l.Ex,{variant:"error",className:"text-xs",children:"Ordered"});default:return(0,s.jsx)(l.Ex,{variant:"secondary",className:"text-xs",children:e})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Table Management"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage seat availability and reservations"})]}),(0,s.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Available"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 text-red-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Ordered"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:null==t?void 0:t.map(e=>{var t,a,r;let i=e.seats.filter(e=>"available"===e.status).length,o=e.seats.filter(e=>"ordered"===e.status).length,n=e.seats.length,c=Math.round(o/n*100);return(0,s.jsxs)(l.Zp,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300",children:[(0,s.jsxs)(l.aR,{className:"pb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(m.A,{className:"h-5 w-5 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.ZB,{className:"text-lg font-semibold text-gray-900",children:[e.tableName," Table"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[n," seats • ",c,"% occupied"]})]})]}),(0,s.jsxs)(l.Ex,{variant:c>50?"error":c>0?"warning":"success",className:"text-xs font-semibold",children:[c,"%"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-green-800",children:i}),(0,s.jsx)("div",{className:"text-xs text-green-600",children:"Available"})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-red-800",children:o}),(0,s.jsx)("div",{className:"text-xs text-red-600",children:"Ordered"})]})]})]}),(0,s.jsxs)(l.Wu,{className:"pt-0 space-y-3",children:[(0,s.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.seats.map(t=>{var a,l,r,i;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(d.S,{disabled:"available"===t.status||null!==g&&g!==e._id.$oid,checked:null===(a=u[e._id.$oid])||void 0===a?void 0:a.includes(t._id.$oid),onCheckedChange:a=>v(e._id.$oid,t._id.$oid,a)}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[y(t.status),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"font-bold text-blue-700 text-sm",children:(null===(r=t.title)||void 0===r?void 0:null===(l=r.match(/\d+/))||void 0===l?void 0:l[0])||(null===(i=t.title)||void 0===i?void 0:i.substring(0,2))})}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:t.title})]})]})]}),j(t.status)]},t._id.$oid)})}),(0,s.jsx)(l.$n,{disabled:g!==e._id.$oid||!(null===(t=u[e._id.$oid])||void 0===t?void 0:t.length),onClick:()=>f(e.tableName,e._id.$oid),className:"w-full mt-4",variant:(null===(a=u[e._id.$oid])||void 0===a?void 0:a.length)?"default":"outline",children:(null===(r=u[e._id.$oid])||void 0===r?void 0:r.length)?"Update ".concat(u[e._id.$oid].length," seat(s)"):"Select seats to update"})]})]},e._id.$oid)})}),(!t||0===t.length)&&(0,s.jsx)(l.Zp,{className:"border-0 shadow-sm",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tables found"}),(0,s.jsx)("p",{className:"text-gray-600 text-center",children:"There are no tables configured yet."})]})})]})}},2291:(e,t,a)=>{a.d(t,{S:()=>n});var s=a(95155),l=a(12115),r=a(86352),i=a(27193),o=a(21567);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[#E78140] data-[state=checked]:text-primary-foreground",a),...l,children:(0,s.jsx)(r.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})})});n.displayName=r.bL.displayName},34180:(e,t,a)=>{function s(e){return"object"==typeof e&&null!==e&&"error"in e}async function l(e){let t=await fetch("".concat("","/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(s(e)?e.error:"Login failed")}return t.json()}async function r(){return(await fetch("".concat("","/api/tables"))).json()}async function i(e){return console.log(e),(await fetch("".concat("","/api/table/update-table-seat-status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function o(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let a="".concat("","/api/order").concat(t.toString()?"?".concat(t.toString()):"");return(await fetch(a)).json()}async function n(e){console.log("API call data:",e),console.log("API call date:",e.date,typeof e.date),console.log("API call JSON:",JSON.stringify(e));let t=await fetch("".concat("","/api/order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((s(e)?e.error:"Order creation failed")||"Order creation failed")}return t.json()}async function d(e){let t=await fetch("".concat("","/api/approve-order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(s(e)?e.error:"Failed to approve order")}return t.json()}async function c(e){let t=await fetch("".concat("","/api/cancel-order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(s(e)?e.error:"Failed to cancel order")}return t.json()}a.d(t,{CW:()=>d,Fi:()=>o,Il:()=>l,P3:()=>n,V9:()=>i,VV:()=>c,qx:()=>r})},36669:(e,t,a)=>{a.d(t,{K2:()=>o,em:()=>n,l3:()=>d,s8:()=>c});var s=a(547),l=a(25848),r=a(34180),i=a(30814);let o=()=>(0,s.I)({queryKey:["tables"],queryFn:r.qx}),n=e=>(0,s.I)({queryKey:["order-list",null==e?void 0:e.page,null==e?void 0:e.limit],queryFn:()=>(0,r.Fi)(e)}),d=e=>(0,l.n)({mutationFn:e=>(0,r.CW)(e),onSuccess:()=>{i.o.success("Order approved"),e()},onError:()=>{i.o.error("Failed to approve order")}}),c=e=>(0,l.n)({mutationFn:e=>(0,r.VV)(e),onSuccess:()=>{i.o.success("Order cancelled"),e()},onError:()=>{i.o.error("Failed to cancel order")}})}}]);